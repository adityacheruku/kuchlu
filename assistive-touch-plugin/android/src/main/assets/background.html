<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Background Bridge</title>
  <script src="realtimeService.js"></script> <!-- your existing client logic -->
  <script>
    // Called by native to supply auth token
    function setAuthToken(token) {
      if (window.realtimeService) {
        window.realtimeService.connect(token);
      }
    }
    
    // Called by native to supply API URL
    function setApiUrl(url) {
      if(window.realtimeService) {
        window.realtimeService.setBaseUrl(url);
      }
    }

    // When realtimeService emits an event:
    if (window.realtimeService) {
        window.realtimeService.subscribe((event, data) => {
            if(event === 'moodUpdate' && window.Android) {
                 Android.onMoodUpdate(JSON.stringify(data));
            } else if (event === 'presenceUpdate' && window.Android) {
                 Android.onPresenceUpdate(JSON.stringify(data));
            }
        });
    }

  </script>
</head>

<body></body>

</html>
